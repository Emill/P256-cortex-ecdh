echo "	.syntax unified"
echo "	.thumb"
perl -0777 -pe 's/;thumb_func/.thumb_func/g;s/;/\/\//g;s/export/\.global/g;s/(([a-zA-Z0-9_]+) proc[\W\w]+?)endp/\1\.size \2, \.-\2/g;s/([a-zA-Z0-9_]+) proc/\t\.type \1, %function\n\1:/g;s/(\r?\n)(\d+)(\r?\n)/\1\2:\3/g;s/%b(\d+)/\1b/g;s/%f(\d+)/\1f/g;s/(frame[\W\w]+?\n)/\/\/\1/g;s/area \|([^\|]+)\|[^\n]*\n/\1\n/g;s/align 2/.align 1/g;s/align 4/.align 2/g;s/\n([a-zA-Z0-9_]+)(\r?\n\s)dcd/\n\1:\2.word/g;s/dcd/.word/g;s/\n([a-zA-Z0-9_]+)(\r?\n\s)dcw/\n\1:\2.hword/g;s/dcw/.hword/g;s/\n([a-zA-Z0-9_]+)(\r?\n\s)dcb/\n\1:\2.byte/g;s/dcb/.byte/g;s/(X\d+) RN (\d+)/\t\1 .req r\2/g;s/if (.*?) ==/.if \1 ==/g;s/else/.else/g;s/endif/.endif/g;s/gbla [a-zA-Z0-9_]+//g;s/([a-zA-Z0-9_]+) seta /.set \1, /g;s/\/\/label definition/:/g;s/end(\r?\n)/.end\1/g;s/\r?\n/\n/g;'
